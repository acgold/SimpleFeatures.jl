<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting started · SimpleFeatures.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://acgold.github.io/SimpleFeatures.jl/getting_started/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.044/juliamono.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SimpleFeatures.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Getting started</a><ul class="internal"><li><a class="tocitem" href="#Load-SimpleFeatures.jl"><span>Load SimpleFeatures.jl</span></a></li><li><a class="tocitem" href="#Read-and-write-data"><span>Read &amp; write data</span></a></li><li><a class="tocitem" href="#DataFrame-operations"><span>DataFrame operations</span></a></li><li><a class="tocitem" href="#Spatial-operations"><span>Spatial operations</span></a></li><li><a class="tocitem" href="#Plotting"><span>Plotting</span></a></li></ul></li><li><a class="tocitem" href="../how_it_works/">How it works</a></li><li><a class="tocitem" href="../long_term_goals/">Long-term goals</a></li><li><a class="tocitem" href="../reference/">Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting started</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/acgold/SimpleFeatures.jl/blob/main/docs/src/getting_started.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h1><h2 id="Load-SimpleFeatures.jl"><a class="docs-heading-anchor" href="#Load-SimpleFeatures.jl">Load SimpleFeatures.jl</a><a id="Load-SimpleFeatures.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Load-SimpleFeatures.jl" title="Permalink"></a></h2><p>We&#39;ll load the package in these examples as <code>SF</code>, shorthand for <code>SimpleFeatures</code></p><pre><code class="language-julia hljs">import SimpleFeatures as SF</code></pre><h2 id="Read-and-write-data"><a class="docs-heading-anchor" href="#Read-and-write-data">Read &amp; write data</a><a id="Read-and-write-data-1"></a><a class="docs-heading-anchor-permalink" href="#Read-and-write-data" title="Permalink"></a></h2><p>Most GIS types can be read and written using the functions <code>st_read</code> and <code>st_write</code>, respectively. Parquet files can be read/written using the functions <code>st_read_parquet</code> and <code>st_write_parquet</code>.</p><pre><code class="language-julia hljs">x = SF.st_read(&quot;data/test.gpkg&quot;)

SimpleFeature
---------
geomtype:  wkbPolygon
crs:       PROJCRS[&quot;NAD83(2011) / UTM zone 17N&quot;,BASEGEOGCRS[&quot;NAD83(2011)&quot;,DATUM[&quot;NAD83 (National Spatial Refere...&quot;
---------
features:  
1000×2 DataFrame
  Row │ geom                          lyr.1 
      │ sfgeom                        Int32 
──────┼─────────────────────────────────────
    1 │ POLYGON ((853787 3905499,...      1
    2 │ POLYGON ((853800 3905499,...      1
    3 │ POLYGON ((853803 3905499,...      1
  ⋮   │              ⋮                  ⋮
  998 │ POLYGON ((904045 3905468,...      1
  999 │ POLYGON ((905355 3905468,...      1
 1000 │ POLYGON ((905561 3905469,...      1
                            994 rows omitted</code></pre><pre><code class="language-julia hljs">SF.st_write(&quot;data/new_test.gpkg&quot;, x)

&quot;data/new_test.gpkg&quot;</code></pre><h2 id="DataFrame-operations"><a class="docs-heading-anchor" href="#DataFrame-operations">DataFrame operations</a><a id="DataFrame-operations-1"></a><a class="docs-heading-anchor-permalink" href="#DataFrame-operations" title="Permalink"></a></h2><p>Many common <a href="https://dataframes.juliadata.org/stable/">DataFrames</a> operations work with <code>SimpleFeature</code> objects. If the operation you want (e.g., Grouped DataFrames operations) isn&#39;t offered yet, you can access and manipulate the DataFrame of the <code>SimpleFeature</code> object directly by appending <code>.df</code> to your object.</p><p>Supported operations:</p><ul><li>Indexing</li><li>select(!)</li><li>transform(!)</li><li>rename(!)</li><li>subset(!)</li><li>nrow, ncol</li><li>combine</li><li>first, last</li><li>eachrow (but you can just iterate on a <code>SimpleFeature</code> object b/c we internally convert DataFrameRows to DataFrames.)</li></ul><hr/><p>Check out <a href="https://github.com/JuliaData/DataFramesMeta.jl">DataFramesMeta.jl</a> for some nice macros for many of these functions - they should work directly on <code>SimpleFeature</code> objects!</p><h2 id="Spatial-operations"><a class="docs-heading-anchor" href="#Spatial-operations">Spatial operations</a><a id="Spatial-operations-1"></a><a class="docs-heading-anchor-permalink" href="#Spatial-operations" title="Permalink"></a></h2><p><code>SimpleFeatures</code> offers some basic spatial functions and will offer more in future releases.</p><p>Check out <a href="../reference/#Reference">Reference</a> for a full list of functions available functions. Below are a few examples.</p><h3 id="Cast-polygons-to-linestrings"><a class="docs-heading-anchor" href="#Cast-polygons-to-linestrings">Cast polygons to linestrings</a><a id="Cast-polygons-to-linestrings-1"></a><a class="docs-heading-anchor-permalink" href="#Cast-polygons-to-linestrings" title="Permalink"></a></h3><p>In this example, <code>SimpleFeatures</code> will cast each polygon to a <strong>multilinestring</strong> and then to a <strong>linestrings</strong>. Some polygons had holes (multiple lines per polygon), so the resulting DataFrame has more rows than the original. In cases such as this, <code>SimpleFeatures</code> adds a column of the geometry type + &quot;ID&quot; (e.g. <code>_MultiLineStringID</code>) that preserves which multigeometry type the split geometry belonged to.</p><pre><code class="language-julia hljs">lines = SF.st_cast(df, &quot;linestring&quot;)

SimpleFeature
---------
geomtype:  wkbLineString
crs:       PROJCRS[&quot;NAD83(2011) / UTM zone 17N&quot;,BASEGEOGCRS[&quot;NAD83(2011)&quot;,DATUM[&quot;NAD83 (National Spatial Refere...&quot;
---------
features:  
1022×3 DataFrame
  Row │ lyr.1  _MultiLineStringID  geom                         
      │ Int32  Int64               sfgeom                       
──────┼─────────────────────────────────────────────────────────
    1 │     1                   1  LINESTRING (853787 390549...
    2 │     1                   2  LINESTRING (853800 390549...
    3 │     1                   3  LINESTRING (853803 390549...
  ⋮   │   ⋮            ⋮                        ⋮
 1020 │     1                 998  LINESTRING (904045 390546...
 1021 │     1                 999  LINESTRING (905355 390546...
 1022 │     1                1000  LINESTRING (905561 390546...
                                               1016 rows omitted</code></pre><h3 id="Buffer"><a class="docs-heading-anchor" href="#Buffer">Buffer</a><a id="Buffer-1"></a><a class="docs-heading-anchor-permalink" href="#Buffer" title="Permalink"></a></h3><p>Using the linestrings from the <code>st_cast</code> example above, we will add a 10m buffer.</p><pre><code class="language-julia hljs">buffered_lines = SF.st_buffer(lines, 10) # buffer distance is in units of the crs. Meters in this example

SimpleFeature
---------
geomtype:  wkbPolygon
crs:       PROJCRS[&quot;NAD83(2011) / UTM zone 17N&quot;,BASEGEOGCRS[&quot;NAD83(2011)&quot;,DATUM[&quot;NAD83 (National Spatial Refere...&quot;
---------
features:  
1022×3 DataFrame
  Row │ lyr.1  _MultiLineStringID  geom                         
      │ Int32  Int64               sfgeom                       
──────┼─────────────────────────────────────────────────────────
    1 │     1                   1  POLYGON ((853787 3905509,...
    2 │     1                   2  POLYGON ((853800 3905509,...
    3 │     1                   3  POLYGON ((853803 3905509,...
  ⋮   │   ⋮            ⋮                        ⋮
 1020 │     1                 998  POLYGON ((904045 3905478,...
 1021 │     1                 999  POLYGON ((905355 3905478,...
 1022 │     1                1000  POLYGON ((905556.62823740...
                                               1016 rows omitted</code></pre><h3 id="Reproject"><a class="docs-heading-anchor" href="#Reproject">Reproject</a><a id="Reproject-1"></a><a class="docs-heading-anchor-permalink" href="#Reproject" title="Permalink"></a></h3><p>Let&#39;s reproject the polygons we just made with <code>st_buffer</code>.</p><pre><code class="language-julia hljs">reprojected_buffer = SF.st_transform(x, GeoFormatTypes.EPSG(5070))

SimpleFeature
---------
geomtype:  wkbPolygon
crs:   5070
---------
features:  
1000×2 DataFrame
  Row │ lyr.1  geom                         
      │ Int32  sfgeom                       
──────┼─────────────────────────────────────
    1 │     1  POLYGON ((1693276.9257186...
    2 │     1  POLYGON ((1693289.637015 ...
    3 │     1  POLYGON ((1693292.5703908...
  ⋮   │   ⋮                 ⋮
  998 │     1  POLYGON ((1742412.4620032...
  999 │     1  POLYGON ((1743692.7581942...
 1000 │     1  POLYGON ((1743893.9246629...
                            994 rows omitted</code></pre><h3 id="Intersection"><a class="docs-heading-anchor" href="#Intersection">Intersection</a><a id="Intersection-1"></a><a class="docs-heading-anchor-permalink" href="#Intersection" title="Permalink"></a></h3><p>Say we have two sets of features (two different SimpleFeature objects, <code>x</code> and <code>y</code>), and we&#39;d like to find their intersection and preserve their traits. We can do this with <code>st_intersection</code>.</p><pre><code class="language-julia hljs">intersection = SF.st_intersection(x, y)

SimpleFeature
---------
geomtype:  wkbPolygon
crs:       PROJCRS[&quot;NAD83(2011) / UTM zone 17N&quot;,BASEGEOGCRS[&quot;NAD83(2011)&quot;,DATUM[&quot;NAD83 (National Spatial Refere...&quot;
---------
features:  
357×3 DataFrame
 Row │ lyr.1  lyr.1_1  geom                         
     │ Int32  Int32    sfgeom                       
─────┼──────────────────────────────────────────────
   1 │     1        1  POLYGON ((853789 3905499,...
  ⋮  │   ⋮       ⋮                  ⋮
 357 │     0        0  POLYGON ((857155 3905468,...
                                    355 rows omitted</code></pre><p>In this example, <code>y</code> is a buffered subset of <code>x</code>, so both input objects had the same column &quot;lyr.1&quot;. When this happens, a suffix will be added to the column from <code>y</code> and it will be joined with <code>x</code>.</p><h3 id="Area"><a class="docs-heading-anchor" href="#Area">Area</a><a id="Area-1"></a><a class="docs-heading-anchor-permalink" href="#Area" title="Permalink"></a></h3><p>I wonder what the area of overlap was from the Intersection example? Let&#39;s check it out! The result is in units of the crs.</p><pre><code class="language-julia hljs">area_list = SF.st_area(intersection)

357-element Vector{Float64}:
  2.0
  2.0
  2.0
  2.0
  1.0
  1.0
  ⋮
 36.0
  1.0
  1.0
  1.0
  1.0
  1.0</code></pre><h2 id="Plotting"><a class="docs-heading-anchor" href="#Plotting">Plotting</a><a id="Plotting-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting" title="Permalink"></a></h2><p>Plot a <code>SimpleFeature</code> object using Plots. It will use an equal aspect ratio.</p><pre><code class="language-julia hljs">using Plots

x = SF.st_read(&quot;example.gpkg&quot;)

plot(x)</code></pre><p>If you want to specify the fill of geometries based on a column, pass the name of the column to <code>fill_col</code>. </p><p>Specify a color palette from <a href="https://juliagraphics.github.io/ColorSchemes.jl/stable/basics/#Pre-defined-schemes-1">ColorSchemes</a> by passing a palette to <code>fill</code>.</p><p><code>julia  plot(x, fill = palette(:viridis), fill_col = :cool_value)</code></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../how_it_works/">How it works »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.19 on <span class="colophon-date" title="Tuesday 30 August 2022 19:38">Tuesday 30 August 2022</span>. Using Julia version 1.8.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
